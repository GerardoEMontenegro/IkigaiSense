{% extends 'layouts/general_layout.html' %}
{% load static %}
{% load widget_tweaks %}
{% load django_browser_reload %}
{% django_browser_reload_script %}

{% block title_layout %}
{% endblock %}

{% block content %}
<main class="mb-20">
    <!-- Sección de portada -->
    <section class="relative h-[70vh] bg-cover bg-center text-white" style="background-image:url('{% static 'assets/images/portada1.webp' %}');">
        <div class="relative z-10 h-full flex flex-col justify-start items-center text-start pt-9 px-4 text-center">
            <h1 class="text-5xl md:text-7xl font-tangerine text-shadow-lg/40 text-white mt-10 max-w-5xl">
                Si no has encontrado tu Ikigai, su búsqueda ya constituye un propósito en sí mismo.
            </h1>
            <div class="flex flex-wrap justify-center mt-auto mb-8 gap-5">
                <a href="{% url 'post:post_list' %}" 
                   class="border-2 border-white rounded-full bg-[#F6F2E6] text-[#203329] font-spectral font-bold py-3 px-6 hover:bg-[#203329] hover:text-amber-50 transition duration-300">
                   Últimos posts
                </a>
                <a href="{% url 'post:category_create' %}" 
                   class="border-2 border-white rounded-full bg-[#F6F2E6] text-[#203329] font-spectral font-bold py-3 px-6 hover:bg-[#203329] hover:text-amber-50 transition duration-300">
                   Categorías
                </a>
            </div>
        </div>
    </section>

    <!-- Lista de posts -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="m-8 grid gap-8 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
            {% for post in posts %}
            <div class="flex flex-col rounded-lg shadow-lg overflow-hidden hover:shadow-2xl transition-shadow duration-300">
                <!-- Imagen -->
                <div class="flex-shrink-0">
                    {% with post.images.first as post_image %}
                        {% if post_image %}
                            <img class="h-48 w-full object-cover" src="{{ post_image.image.url }}" alt="{{ post.title }}">
                        {% else %}
                            <div class="h-48 w-full bg-[#203329] flex items-center justify-center px-4">
                                <span class="text-white text-xl font-libertinus-bold text-center">{{ post.title }}</span>
                            </div>
                        {% endif %}
                    {% endwith %}
                </div>

                <!-- Contenido -->
                <div class="flex-1 bg-white p-6 flex flex-col justify-between">
                    <div>
                        <h3 class="mt-2 text-xl font-libertinus-italic text-[#203329]">
                            {{ post.title }}
                        </h3>
                        <p class="mt-3 text-base font-libertinus-regular text-gray-500">
                            {{ post.content|truncatewords:25|linebreaksbr }}
                        </p>
                    </div>
                    <div class="mt-6">
                        <a href="{% url 'post:post_detail' post.slug %}" 
                           class="text-lg font-libertinus-bold text-[#445e35] hover:text-xl hover:text-[#203329] transition duration-300">
                           Leer más &rarr;
                        </a>
                    </div>
                </div>
            </div>
            {% empty %}
            <p class="col-span-full text-center text-gray-500 text-lg">
                No hay publicaciones disponibles.
            </p>
            {% endfor %}
        </div>
    </div>
</main>
{% endblock %}
